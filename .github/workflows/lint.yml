name: Lint

on: [push, pull_request]

jobs:
    luacheck:
        name: Luacheck
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - name: Setup
              run: |
                  sudo apt-get update
                  sudo apt-get install luarocks
                  sudo luarocks install luacheck

            - name: Lint
              run: luacheck lua/ --globals vim

    stylua:
        name: Stylua
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - uses: JohnnyMorganz/stylua-action@v3
              with:
                token: ${{ secrets.GITHUB_TOKEN }}
                version: latest
                args: --color always --check lua/ --config-path=.stylua.toml
